---
icinga::cert_name: "%{facts.networking.fqdn}"
icinga::ticket_salt: topsecret

icinga::agent::ca_server: 192.168.10.100
icinga::agent::parent_endpoints:
  server.icinga.summit2024.berlin:
     host: "%{lookup('icinga::agent::ca_server')}"

profile::icinga::objects:
  Host:
    "%{lookup('icinga::cert_name')}":
      import: ['generic-host']
      display_name: "%{facts.networking.hostname}"
      address: "%{facts.networking.interfaces.eth1.ip}"

lookup_options:
  'profile::icinga::objects':
    merge:
      strategy: deep
